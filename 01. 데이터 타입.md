# 01 데이터타입

- 기본형 타입과 참조형 타입이 서로 다르게 동작하는 이유를 이해하기
- 자바스크립트가 데이터를 처리하는 과정을 살펴봄으로써 기본형 타입과 참조형 타입을 적절히 활용하기
- 데이터 타입과 관련된 중요한 개념 추가적으로 살펴보기

## 01 데이터 타입의 종류

- 자바스크립트의 데이터타입
  - 기본형 (원시형, primitive type) : 숫자, 문자열, 불리언, null, undefined, Symbol 등
  - 참조형 (reference type) : 객체 object, 배열 Array, 함수 Function, 날짜 Date, 정규표현식 RegExp, Map, WeakMap, Set, WeakSet 등
- 기본형은 불변성(immutability)을 띔

## 02 데이터 타입에 관한 배경지식

### 1) 메모리와 데이터

#### 비트 Bit

- **비트 bit** 0 또는 1만 표현할 수 있는 하나의 메모리 조각.
- 비트는 몇 개씩 묶어 하나의 단위로 여기면 표현할 수 있는 값도 늘어나면서 동시에 검색 시간을 줄일 수 있다.
- 표현할 수 있는 데이터의 개수가 느는 동시에 낭비되는 비트가 생기기도 함

#### 바이트 Byye

- 1바이트 = 비트 8개 = 2의 8승 = 표현할 수 있는 값 256개
- 2바이트 = 비트 16개 = 2의 16승 = 표현할 수 있는 값 65536개
- 각 비트는 고유의 식별자를 지님으로 바이트 역시 시작하는 비트의 식별자.
- 모든 데이터는 바이트 단위의 식별자, 더 정확하게는 메모리의 주솟값(memory adress)을 통해 서로 구분하고 연결할 수 있다.

### 2) 식별자와 변수

- 변수와 식별자 혼용 주의!

#### 변수 variable

- 변할 수 있는 수
- 변할 수 있는 **무언가(=데이터)**

#### 식별자

- 어떤 데이터를 식별하는 데 사용하는 이름
- 변수명

## 03 변수 선언과 데이터 할당

### 1) 변수 선언

```javascript
01 var a;
```

- 변할 수 있는 데이터를 만든다, 이 데이터의 식별자는 a로 한다.
- **변수란?** 변경 가능한 데이터가 담길 수 있는 공간 또는 그릇.
- 사용자가 a에 접근하고자 하면 컴퓨터는 메모리에서 a라는 이름을 가진 주소를 검색해 해당 공간에 담긴 데이터를 반환한다.

### 2) 데이터 할당

```javascript
var a = "abc"; //변수 선언과 할당을 한 문장으로 표현
```

- 데이터를 저장하기 위한 별도의 메모리 공간을 다시 확보해서 문자열 `abc`를 저장하고, 그 주소를 변수영역에 저장하는 식으로 이뤄진다. 효율적으로 문자열 데이터의 변환을 처리하려면 변수와 데이트의 공간을 나누어 저장하는 것이 최적이다.
- 변수 영역과 데이터 영역을 분리하면 중복된 데이터에 대한 처리 효율이 높아진다.
- 기존 데이터는 자신의 주소를 저장하는 변수가 하나도 없게 되면 가비지 컬렉터의 수거 대상이 된다.

## 4. 기본형 데이터와 참조형 데이터

### 1) 불변값

- 기본형 데이터는 모두 불변값이다.
- 불변값은 한 번 만들어진 값은 가비지 컬렉팅을 당하지 않는 한 영원히 변하지 않는 것을 말한다.

### 2) 가변값

#### 참조형 데이터를 변수에 할당하는 경우

- 우선 참조형 데이터를 변수에 할당하는 과정부터 확인해 보자.

```javascript
var obj1 = {
  a: 1,
  b: "bbb",
};

obj1.a = 2;
```

- 새로운 객체가 만들어 진 것이 아니라 기존의 객체 내부의 값만 바뀐 것이기 때문에 `obj1.a`에 2를 할당했을 때 변수 obj1이 바라보는 주소의 값는 변하지 않는다.
- 객체의 변수 영역에 a의 데이터 영역 주소만 변한다.

#### 중첩 객체

- 다음은 중첩 객체, 참조형 데이터의 프로터티에 다시 참조형 데이터를 할당하는 경우를 살펴보자.

```javascript
var obj = {
  x: 3,
  arr: [3, 4, 5],
};
```

### 3) 변수 복사 비교

- 기본형 데이터/참조형 데이터 차이

```javascript
var a = 10;
var b = a;

var obj1 = { c: 10, d: `ddd` };
var obj2 = obj1;
```

- 기본형 데이터인 변수는 데이터 값이 달라지지만, 참조형 데이터인 객체는 데이터 값은 변하지 않는다.

```javascript
a !== b;
obj1 === obj2;
```

- 기본형, 참조형 둘다 주솟값을 참조한다.
- 참조형 데이터가 가변값이라 설명되는 이유는 참조형 데이터 자체를 변경할 경우가 아니라, 그 내부의 프로퍼티를 변경할 때만 성립니다.
- 예시

```javascript
var a = 10;
var b = a;

var obj1 = { c: 10, d: "ddd" };
var obj2 = obj1;

b = 15;
obj2 = { c: 20, d: "ddd" }; // 1번
```

- 1번에서 새로운 객체를 할당함으로 값을 직접 변경했으므로 obj2의 변수영역에 새로운 데이터 영역에 새 객체가 저장된 주소가 저장된다.

## 5. 불변 객체

### 1) 불변 객체를 만드는 간단한 방법

```javascript
var user = {
  name: "jaenam",
  gender: "mail",
};

var changeName = function (user, newName) {
  var newUser = user;
  newUser.name = newName;
  return newUser;
};

var user2 = changeName(user, "jung");

if (user !== user2) {
  console.log("유저의 정보가 변경되었습니다.");
} //출력안됨

console.log(user.name, user2.name); // jung jung
console.log(user === user2); //true
```

- 만약 정보가 바뀐 시점에 알림을 보내야 한다거나, 바뀌기 전의 정보와 바뀐 후의 정보의 차이를 가시적으로 보여줘야하는 기능을 구현하려면 위에 코드는 불가하다.
- 해결방법은 changeName 함수에 새로운 객체를 반환하도록 하는 방법이다.

```javascript
var user = {
  name: "jaenam",
  gender: "mail",
};

var changeName = function (user, newName) {
  return {
    name: newName,
    gender: user.gender,
  };
};

var user2 = changeName(user, "jung");

if (user !== user2) {
  console.log("유저의 정보가 변경되었습니다.");
} //유저의 정보가 변경되었습니다.

console.log(user.name, user2.name); //jaenam jung
console.log(user === user2); //false
```
